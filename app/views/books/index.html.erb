<p id="notice"><%= notice %></p>

<h1>Books</h1>

<table>
  <thead>
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Release date</th>
    <th>Language</th>
    <th>Rating Count</th>
    <th>Comments Count</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @books.each do |book| %>
    <tr>
      <td><%= book.name %></td>
      <td><%= book.category&.name %></td>
      <td><%= book.release_date %></td>
      <td><%= book.language %></td>
      <td><%= book.ratings_count %></td>
      <td><%= book.comments_count %></td>
      <td><%= link_to 'Show', category_book_path(book.category, book) %></td>
      <% if can? :manage, book %>
        <td><%= link_to 'Edit', edit_category_book_path(book.category, book) %></td>
        <td><%= link_to 'Destroy', category_book_path(book.category, book), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<br>
<% if @category.present? %>
  <%= link_to 'New Book', new_category_book_path(@category) %>
<% end %>
